## I. 관계 데이터 모델의 개념

→ 수학의 집합이론에 근거하여 타 모델에 비해 튼튼한 이론적 토대를 가짐

→ 이 모델이 적용된 SQL언어는 비절차적인 언어로 원하는 데이터를 쉽게 표현할 수 있음

→ 대표적인 관계 데이터 모델 DBMS로는 Oracle, SQL Server, MySQL 등이 있음

### 릴레이션

행과 열로 구성된 테이블

영어 relation은 우리말로 ‘관계’이지만 relationship이라는 용어를 ‘관계’라고 하므로 번역의 충돌을 피하기 위해 ‘릴레이션’ 그대로 부름

하지만 다른 용어에 포함된 relation은 그대로 ‘관계’로 번역

릴레이션은 수학의 집합에서 나온 개념으로, 릴레이션이 가진 각자 집합들은 각각의 원소를 가지고 있음

### 릴레이션 스키마

→ 관계 데이터베이스의 릴레이션이 어떻게 구성되는지, 어떤 정보를 담고 있는지에 대한 기본적인 구조를 정의

스키마는 테이블의 첫 행인 헤더에 나타나며 각 데이터의 특징을 나타내는 속성, 자료 타입 등 정보를 담고 있음 

- 속성 : 릴레이션 스키마의 열

→ 우리는 속성의 이름을 보고 어떤 정보가 담기는지 알 수 있음

- 도메인 : 속성이 가질 수 있는 값의 집합

→ 컴퓨터로 처리되는 과정에서 데이터베이스는 속성 이름만으로 어떤 형태의 자료가 있는지 알 수 없기에 도메인을 사용하여 정의함

- 차수 : 속성의 개수
- 릴레이션 스키마 표기 예시 : **도서(도서번호, 도서이름, 출판사, 가격)**

### 릴레이션 인스턴스

릴레이션 스키마에 실제로 저장되는 데이터의 집합

- 투플 : 릴레이션에서 한 행

→ 투플의 속성 값은 릴레이션 스키마에서 정의한 도메인 값으로 구성

→ 투플이 가지는 속성의 개수는 스키마의 차수와 동일

→ 모든 투플은 중복 X

- 카다날리티 : 릴레이션에 저장된 투플의 수

### 릴레이션의 특징

- 속성은 단일 값을 가짐
- 속성은 서로 다른 이름을 가짐
- 한 속성의 값은 모두 같은 도메인 값을 가짐
- 속성, 투플의 순서는 상관X
- 릴레이션 내 중복된 투플은 허용X

### 관계 데이터 모델

→ 데이터를 2차원 테이블 형태인 릴레이션으로 표현

→ 릴레이션에 대한 제약조건과 관계대수를 정의함

## II. 무결성 제약조건

데이터베이스는 일관성을 유지하고 중복을 제거하는 등 데이터의 신뢰도를 유지해야 함

### 키

릴레이션에서 특정 투플을 식별할 때 사용하는 속성 혹은 그 집합

→ 반드시 값이 달라서 투플들을 서로 구별할 수 있어야 함

- 슈퍼키 : 투플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
- 후보키 : 투플을 유일하게 식별할 수 있는 속성의 최소 집합
- 기본키 : 릴레이션의 특성을 반영해 여러 후보키 중 하나를 선정하여 대표로 삼는 키
- 대체키 : 기본키로 선정되지 않은 후보키
- 대리키 : 일련번호 등 가상의 속성을 만들어 기본키로 삼는 것
- 외래키 : 다른 릴레이션의 기본키를 참조하는 속성

→ 외래키가 성립하기 위해선 **참조하고 참조되는 양쪽 릴레이션의 도메인이 서로 같아야 함**

→ 외래키는 기본키와 달리 NULL 값, 중복 값 포함 가능

→ 자기 자신의 기본키도 참조 가능

→ 참조되는 기본키 값이 변경되면 참조하는 외래키 값도 변경됨

### 무결성 제약조건

→ 데이터베이스에 저장된 데이터의 일관성과 정확성을 지키는 것

- 도메인 무결성 제약조건

릴레이션 내 투플들이 각 속성의 도메인에 지정된 값만을 가져야 함. 프로그램이 언어의 변수형 선언과 개념이 유사

- 개체 무결성 제약조건

릴레이션은 기본키를 지정하고 기본키는 NULL값을 가져서는 안 되며 오직 하나의 값만 존재해야 함

- 참조 무결성 제약조건

릴레이션 간의 참조 관계를 선언하는 제약조건. 참조되는 릴레이션을 부모 릴레이션, 참조하는 릴레이션을 자식 릴레이션이라 하는데 자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 도메인이 동일해야 하며, 자식 릴레이션의 값이 변경될 때 부모 릴레이션의 제약을 받음

→ 제약조건의 준수 여부는 데이터의 변경(삽입, 수정, 삭제)이 있을 때마다 확인해야 함

### 참조 무결성 제약조건의 옵션

명령어

- RESTRICTED: 자식 릴레이션에서 참조하고 있을 경우 부모 릴레이션의 삭제 작업을 거부
- CASCADE: 자식 릴레이션의 관련 투플을 같이 삭제
- DEFAULT: 자식 릴레이션의 관련 투플을 미리 설정해둔 값으로 변경
- NULL: 자식 릴레이션의 관련 투플을 NULL값으로 설정(NULL값 사용을 허가한 경우)

## III. 관계대수

### 관계대수

릴레이션에서 원하는 결과를 얻기 위해 수학의 대수와 같은 연산을 사용하여 질의하는 방법을 기술하는 언어

절차적 언어로, 결과 릴레이션이 나오기까지의 절차를 확인할 수 있음

### 관계의 수학적 의미

릴레이션이라는 수학적 개념에 기초함

### 관계대수 연산자

- 순수 관계 연산 : 셀렉션selection, 프로젝션projection, 조인join, 디비전division, 개명rename

→ 관계 데이터 모델을 위해 고안됨

- 일반 집합 연산 : 합집합union, 차집합difference, 교집합intersection, 카티전 프로덕트cartesian product

→ 수학의 집합이론에서 차용됨

→ 피연산자의 개수에 따라 단항, 이항 연산자로 나눌 수 있음

→ 기본 연산자 다섯 개와 이들로부터 유도 가능한 유도 연산자로 구분됨

https://www.notion.so/Chapter-02-ba5d970ca25848f6b1b0221eae68960b#6e7af3068f6c4ae7883e5fa1f33b35ff

<관계 연산자들의 기능>

 https://www.notion.so/Chapter-02-ba5d970ca25848f6b1b0221eae68960b#b5aa57ac89e14ab69682b1511a5555f1

### 관계대수식

- 단항 연산자 : 연산자*<조건>* 릴레이션
- 이항 연산자 : 릴레이션1 연산자*<조건>* 릴레이션2

### 셀렉션과 프로젝션

하나의 릴레이션을 대상으로 하는 단항 연산자

- 셀렉션 : 릴레이션의 투플을 추출하기 위한 연산, 찾으려는 투플의 조건을 명시하고 그 조건에 만족하는 투플을 반환
- 프로젝션 : 릴레이션의 속성을 추출하기 위한 연산

→ 두 연산자 모두 결과 릴레이션의 차수는 대상 릴레이션의 차수 이하이고 카디날리티는 동일함

### 집합 연산

<aside>
💡 합병가능 : 두 릴레이션의 차수 및 도메인과 속성의 순서가 동일한 조건

</aside>

→ 카티전 프로덕트를 제외한 합집합, 교집합, 차집합은 합병가능해야 성립함

- 합집합 : 두 개의 릴레이션을 합하여 하나의 릴레이션을 반환함
- 교집합 : 두 릴레이션이 공통으로 가지고 있는 투플을 반환함
- 차집합 : 첫 번째 릴레이션에는 속하고 두 번째 릴레이션에는 속하지 않는 투플을 반환함
- 카티전 프로덕트 : 수평적 연산, 두 릴레이션을 연결시켜 하나로 합칠 때 사용

→ 결과 릴레이션은 첫 번째 릴레이션의 오른쪽에 두 번째 릴레이션의 모든 투플을 순서대로 배열하여 반환함

### 조인

두 릴레이션의 공통 속성을 기준으로 속성 값이 같은 투플을 수평으로 결합하는 연산

→ 두 릴레이션을 카티전 프로덕트 연산을 한 후 셀렉션 연산을 한 것

- 세타조인 : 조인에 참여하는 두 릴레이션의 속성 값을 비교하여 조건을 만족하는 투플만 반환함
- 동등조인 :  세타조인에서 = 연산자를 사용한 조인, 보통 조인 연산이라 하면 동등조인을 지칭함
- 자연조인 : 동등조인에서 조인에 참여한 속성이 두 번 나오지 않도록 두 번째 속성을 제거한 결과를 반환함
- 외부조인 : 자연조인 시 조인에 실패한 투플을 모두 보여주되 값이 없는 대응 속성에는 NULL 값을 채워서 반환함

→ 모든 속성을 보여주는 기준 릴레이션의 위치에 따라 왼쪽 외부조인, 오른쪽 외부조인, 완전 외부조인으로 나뉨.

- 세미조인 : 자연조인을 한 후 두 릴레이션 중 한쪽 릴레이션의 결과만 반환함, 기호에서 닫힌 쪽 릴레이션의 투플만 반환함

### 디비전

릴레이션의 속성 값의 집합으로 연산을 수행, 특정 값들을 모두 갖고 있는 투플을 찾을 때 사용

실제로 자주 사용X, 조인 연산의 조합으로 같은 디비전 연산 수행 가능
